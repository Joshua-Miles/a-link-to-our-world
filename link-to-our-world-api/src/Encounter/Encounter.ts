import { persist, Serial, Float } from "@triframe/scribe";

export type EncounterSlug =
    | 'intro/beckoning'
        | 'intro/seeds'
        | 'intro/sword-chest'
        | 'intro/gorruk'
    | 'bazaar/beedle'
        | 'common/chest/bazaar/1'
        | 'common/chicken/bazaar/1'
        | 'common/chicken/bazaar/2'
        | 'common/pot/bazaar/1'
        | 'common/pot/bazaar/2'
        | 'common/tree/bazaar/1'
        | 'common/tree/bazaar/2'
        | 'common/grass/bazaar/1'
        | 'common/grass/bazaar/2'
        | 'common/grass/bazaar/3'
        | 'common/tree/bazaar/4'
    | 'lurelin/intro'
        | 'lurelin/tidebane'
        | 'lurelin/moldarach'
        | 'lurelin/lullaby'
        | 'lurelin/cache'
        | 'common/chest/lurelin/1'
        | 'common/chest/lurelin/2'
        | 'common/chicken/lurelin/1'
        | 'common/chicken/lurelin/2'
        | 'common/grass/lurelin/1'
        | 'common/grass/lurelin/2'
        | 'common/grass/lurelin/3'
        | 'common/pot/lurelin/1'
        | 'common/pot/lurelin/2'
        | 'common/pot/lurelin/3'
        | 'common/pot/lurelin/4'
        | 'common/pot/lurelin/5'
        | 'common/tree/lurelin/1'
    | 'faron/intro'
        | 'faron/tavon'
        | 'faron/skull-kid-1'
        | 'faron/skull-kid-2'
        | 'faron/skull-kid-3'
        | 'faron/lullaby'
        | 'faron/cache'
        | 'common/chest/faron/1'
        | 'common/chest/faron/2'
        | 'common/well/faron/1'
        | 'common/pot/faron/1'
        | 'common/grass/faron/1'
        | 'common/grass/faron/2'
        | 'common/grass/faron/3'
        | 'common/grass/faron/4'
        | 'common/grass/faron/5'
        | 'common/tree/faron/1'
        | 'common/tree/faron/2'
        | 'common/tree/faron/3'
        | 'common/tree/faron/4'
        | 'common/tree/faron/5'
    | 'floria/intro'
        | 'floria/nimri'
        | 'floria/bog-dobber'
        | 'floria/lullaby'
        | 'floria/cache'
        | 'common/chest/floria/1'
        | 'common/chest/floria/2'
        | 'common/cow/floria/1'
        | 'common/cow/floria/2'
        | 'common/cow/floria/3'
        | 'common/cow/floria/4'
        | 'common/well/floria/1'
        | 'common/well/floria/2'
        | 'common/well/floria/3'
        | 'common/grass/floria/1'
        | 'common/grass/floria/2'
        | 'common/grass/floria/3'
        | 'common/tree/floria/1'
        | 'common/tree/floria/2'
        | 'common/tree/floria/3'
    | 'necluda/intro'
        | 'necluda/kyllis'
        | 'necluda/keese'
        | 'necluda/argorok'
        | 'necluda/lullaby'
        | 'necluda/cache'
        | 'common/chest/necluda/1'
        | 'common/chest/necluda/2'
        | 'common/well/necluda/1'
        | 'common/chicken/necluda/1'
        | 'common/chicken/necluda/2'
        | 'common/chicken/necluda/3'
        | 'common/chicken/necluda/4'
        | 'common/pot/necluda/1'
        | 'common/pot/necluda/2'
        | 'common/pot/necluda/3'
        | 'common/grass/necluda/1'
        | 'common/grass/necluda/2'
        | 'common/grass/necluda/3' 
        | 'common/tree/necluda/1'
    | 'interlude/intro'
        | 'interlude/gorruk'
        | 'interlude/vials'
    | 'gerudo/intro'
        | 'gerudo/tidebane'
        | 'gerudo/tidebane-2'
        | 'gerudo/robot'
        | 'gerudo/ravia'
        | 'gerudo/khenna'
        | 'gerudo/eshara'
        | 'gerudo/scervus'
        | 'gerudo/temple'
        | 'gerudo/cache'
    | 'eldin/intro'
        | 'eldin/bouldan'
        | 'eldin/bouldan-2'
        | 'eldin/mines'
        | 'eldin/darvok'
        | 'eldin/fyrus'
        | 'eldin/lodron'
        | 'eldin/temple'
        | 'eldin/cache'
    | 'zoras/intro'
        | 'zoras/addison'
        | 'zoras/nerali'
        | 'zoras/throne-room'
        | 'zoras/tentalus'
        | 'zoras/zaylen'
        | 'zoras/temple'
        | 'zoras/cache'
    | 'hebra/intro'
        | 'hebra/kyllis'
        | 'hebra/wolf'
        | 'hebra/temple-1'
        | 'hebra/temple-2'
        | 'hebra/lloron-den'
        | 'hebra/frostus'
        | 'hebra/cache'
    | 'finale/intro'
        | 'finale/moblin-fight'
        | 'finale/lizalfos-fight'
        | 'finale/gibdo-fight'
        | 'finale/darknut-fight'
        | 'finale/talus-fight'
        | 'finale/lynel-fight'
        | 'finale/hyrule-united'
        | 'finale/songs'
        | 'finale/epilogue';

export type Encounter = {
    id: Serial
    playerId: number;
    slug: EncounterSlug;
    label: string;
    imageSlug: string;
    imageSize: null | number;
    lat: Float<8>;
    lng: Float<8>;
    resolved: boolean;
    state: {}
}

export const AllEncounters = persist<Encounter>()
    .primaryKey('id')
    .uniqueIndexBy('playerId', 'slug')
    .indexBy('playerId')
    .indexBy('resolved')

export const Encounters = AllEncounters.withResolved(false)
